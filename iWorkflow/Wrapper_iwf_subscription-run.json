{
  "name": "Wrapper_iwf_subscription",
  "description": "Execute a chained workflow that authenticates to an iWF platform and setup a subscription based on the env variables",
  "globalEnvVars": "./iWF-Subscription-Collection.postman_environment",
  "globalOptions": {
    "insecure": true,
    "reporters": [
      "cli"
    ]
  },
  "globalVars": {
    "iWorkflow_Mgmt_IP": "192.168.143.25",
    "iwf_username": "admin",
    "iwf_password": "admin"
  },
  "saveEnvVars": true,
  "outputFile": "Wrapper_iwf_subscription-run.json",
  "envOutputFile": "Wrapper_iwf_subscription-run-env.json",
  "workflow": [
    {
      "name": "Authenticate to iWorkflow",
      "options": {
        "collection": "./iWF_API_Authentication.postman_collection",
        "environment": {
          "values": [
            {
              "key": "iWorkflow_Mgmt_IP",
              "value": "192.168.143.25",
              "type": "text",
              "enabled": true
            },
            {
              "key": "iwf_username",
              "value": "admin",
              "type": "text",
              "enabled": true
            },
            {
              "key": "iwf_password",
              "value": "admin",
              "type": "text",
              "enabled": true
            }
          ]
        },
        "insecure": true,
        "reporters": [
          "cli"
        ],
        "globals": "./iWF-Subscription-Collection.postman_environment"
      },
      "children": [],
      "skip": false,
      "run": {
        "collection": {
          "info": {
            "id": "497ef893-8e71-d349-84e1-ef67690f32c6",
            "name": "iWF_API_Authentication",
            "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
          },
          "event": [],
          "variable": [],
          "item": [
            {
              "id": "aca1591f-f0dd-4c94-a973-66ad7bf1bdec",
              "name": "Request a Token from iWorkflow",
              "request": {
                "url": "https://{{iWorkflow_Mgmt_IP}}/mgmt/shared/authn/login",
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"username\": {{iwf_username}},\n  \"password\": {{iwf_password}},\n  \"loginProvidername\": \"tmos\"\n}"
                },
                "description": {
                  "content": "Using Basic Auth, request a token from the iWorkflow platform.",
                  "type": "text/plain"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "var respData = JSON.parse(responseBody);",
                      "",
                      "tests[\"response has token: \" +respData.token.token] = respData.token.token;",
                      "",
                      "postman.setEnvironmentVariable('iWorkflow1_Auth_Token',respData.token.token);",
                      ""
                    ]
                  }
                }
              ]
            },
            {
              "id": "1e9e54e2-0d59-4883-ae04-258bd98cfbeb",
              "name": "Increase Auth Token Timeout",
              "request": {
                "url": "https://{{iWorkflow_Mgmt_IP}}/mgmt/shared/authz/tokens/{{iWorkflow1_Auth_Token}}",
                "method": "PATCH",
                "header": [
                  {
                    "description": {
                      "content": "",
                      "type": "text/plain"
                    },
                    "key": "X-F5-Auth-Token",
                    "value": "{{iWorkflow1_Auth_Token}}"
                  },
                  {
                    "description": {
                      "content": "",
                      "type": "text/plain"
                    },
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"timeout\":\"36000\"\n}"
                },
                "description": {
                  "content": "",
                  "type": "text/plain"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "tests[\"Status code is 200\"] = responseCode.code === 200;",
                      "",
                      "var respData = JSON.parse(responseBody);",
                      "tests[\"Auth Token timeout is: \" +respData.timeout] = respData.timeout;",
                      ""
                    ]
                  }
                }
              ]
            }
          ]
        },
        "environment": {
          "id": "e208e76a-3dd4-4462-ba28-af022c565bd2",
          "values": [
            {
              "type": "any",
              "value": "192.168.143.25",
              "key": "iWorkflow_Mgmt_IP"
            },
            {
              "type": "any",
              "value": "admin",
              "key": "iwf_username"
            },
            {
              "type": "any",
              "value": "admin",
              "key": "iwf_password"
            },
            {
              "type": "any",
              "value": "UAOGTALI44SPM237Y4TVFOKNMD",
              "key": "iWorkflow1_Auth_Token"
            }
          ]
        },
        "globals": {
          "_": {
            "postman_variable_scope": "environment",
            "postman_exported_at": "2017-03-30T14:50:52.557Z",
            "postman_exported_using": "Postman/4.10.5"
          },
          "id": "b18b50ad-93f5-f564-498f-249de91c6fed",
          "name": "iWF Subscription Collection",
          "values": [
            {
              "type": "any",
              "value": "192.168.143.30",
              "key": "iWorkflow_Mgmt_IP"
            },
            {
              "type": "any",
              "value": "admin",
              "key": "iwf_username"
            },
            {
              "type": "any",
              "value": "admin",
              "key": "iwf_password"
            }
          ]
        },
        "run": {
          "stats": {
            "iterations": {
              "total": 1,
              "pending": 0,
              "failed": 0
            },
            "items": {
              "total": 2,
              "pending": 0,
              "failed": 0
            },
            "scripts": {
              "total": 2,
              "pending": 0,
              "failed": 0
            },
            "prerequests": {
              "total": 2,
              "pending": 0,
              "failed": 0
            },
            "requests": {
              "total": 2,
              "pending": 0,
              "failed": 0
            },
            "tests": {
              "total": 2,
              "pending": 0,
              "failed": 0
            },
            "assertions": {
              "total": 3,
              "pending": 0,
              "failed": 0
            },
            "testScripts": {
              "total": 2,
              "pending": 0,
              "failed": 0
            },
            "prerequestScripts": {
              "total": 0,
              "pending": 0,
              "failed": 0
            }
          },
          "timings": {
            "responseAverage": 139,
            "started": 1490888428061,
            "completed": 1490888428417
          },
          "executions": [
            {
              "cursor": {
                "position": 0,
                "iteration": 0,
                "length": 2,
                "cycles": 1,
                "empty": false,
                "eof": false,
                "bof": true,
                "cr": false,
                "ref": "f60bf0cd-c411-433e-9a05-e4d4308e5f4f"
              },
              "item": {
                "id": "aca1591f-f0dd-4c94-a973-66ad7bf1bdec",
                "name": "Request a Token from iWorkflow",
                "request": {
                  "url": "https://{{iWorkflow_Mgmt_IP}}/mgmt/shared/authn/login",
                  "method": "POST",
                  "body": {
                    "mode": "raw",
                    "raw": "{\n  \"username\": {{iwf_username}},\n  \"password\": {{iwf_password}},\n  \"loginProvidername\": \"tmos\"\n}"
                  },
                  "description": {
                    "content": "Using Basic Auth, request a token from the iWorkflow platform.",
                    "type": "text/plain"
                  }
                },
                "response": [],
                "event": [
                  {
                    "listen": "test",
                    "script": {
                      "type": "text/javascript",
                      "exec": [
                        "var respData = JSON.parse(responseBody);",
                        "",
                        "tests[\"response has token: \" +respData.token.token] = respData.token.token;",
                        "",
                        "postman.setEnvironmentVariable('iWorkflow1_Auth_Token',respData.token.token);",
                        ""
                      ]
                    }
                  }
                ]
              },
              "request": {
                "url": "https://192.168.143.25/mgmt/shared/authn/login",
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "text/plain"
                  },
                  {
                    "key": "User-Agent",
                    "value": "PostmanRuntime/5.0.0"
                  },
                  {
                    "key": "Accept",
                    "value": "*/*"
                  },
                  {
                    "key": "Host",
                    "value": "192.168.143.25"
                  },
                  {
                    "key": "accept-encoding",
                    "value": "gzip, deflate"
                  },
                  {
                    "key": "content-length",
                    "value": 75
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"username\": admin,\n  \"password\": admin,\n  \"loginProvidername\": \"tmos\"\n}"
                },
                "description": {
                  "content": "Using Basic Auth, request a token from the iWorkflow platform.",
                  "type": "text/plain"
                }
              },
              "response": {
                "id": "93d580ec-eb1d-4229-8842-e02190b4f78e",
                "status": "OK",
                "code": 200,
                "header": [
                  {
                    "key": "Date",
                    "value": "30 Mar 2017 15:40:28 UTC"
                  },
                  {
                    "key": "Server",
                    "value": "com.f5.rest.common.RestRequestSender"
                  },
                  {
                    "key": "X-Frame-Options",
                    "value": "SAMEORIGIN"
                  },
                  {
                    "key": "Strict-Transport-Security",
                    "value": "max-age=16070400; includeSubDomains"
                  },
                  {
                    "key": "Pragma",
                    "value": "no-cache"
                  },
                  {
                    "key": "Cache-Control",
                    "value": "no-store, no-cache, must-revalidate"
                  },
                  {
                    "key": "Expires",
                    "value": "-1"
                  },
                  {
                    "key": "Content-Length",
                    "value": "711"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Local-Ip-From-Httpd",
                    "value": "192.168.143.25"
                  },
                  {
                    "key": "X-Forwarded-Server",
                    "value": "localhost.localdomain"
                  },
                  {
                    "key": "X-Forwarded-Proto",
                    "value": "http"
                  },
                  {
                    "key": "accept-encoding",
                    "value": "gzip, deflate"
                  },
                  {
                    "key": "X-Forwarded-Host",
                    "value": "192.168.143.25"
                  },
                  {
                    "key": "X-Content-Type-Options",
                    "value": "nosniff"
                  },
                  {
                    "key": "X-XSS-Protection",
                    "value": "1; mode=block"
                  },
                  {
                    "key": "Content-Security-Policy",
                    "value": "default-src 'self'  'unsafe-inline' 'unsafe-eval'; img-src 'self'  http://127.4.1.1 http://127.4.2.1"
                  },
                  {
                    "key": "Keep-Alive",
                    "value": "timeout=4, max=100"
                  },
                  {
                    "key": "Connection",
                    "value": "Keep-Alive"
                  }
                ],
                "body": "{\"username\":\"admin\",\"loginReference\":{\"link\":\"https://localhost/mgmt/cm/system/authn/providers/local/login\"},\"loginProviderName\":\"local\",\"token\":{\"token\":\"UAOGTALI44SPM237Y4TVFOKNMD\",\"name\":\"UAOGTALI44SPM237Y4TVFOKNMD\",\"userName\":\"admin\",\"authProviderName\":\"local\",\"user\":{\"link\":\"https://localhost/mgmt/shared/authz/users/admin\"},\"groupReferences\":[],\"timeout\":1200,\"startTime\":\"2017-03-30T17:40:28.294+0200\",\"address\":\"192.168.143.1\",\"partition\":\"[All]\",\"generation\":1,\"lastUpdateMicros\":1490888428294424,\"expirationMicros\":1490889628294000,\"kind\":\"shared:authz:tokens:authtokenitemstate\",\"selfLink\":\"https://localhost/mgmt/shared/authz/tokens/UAOGTALI44SPM237Y4TVFOKNMD\"},\"generation\":0,\"lastUpdateMicros\":0}",
                "cookie": [],
                "responseTime": 264,
                "responseSize": 711,
                "update": {},
                "_postman_requiresId": true,
                "reason": {},
                "text": {},
                "json": {},
                "mime": {},
                "dataURI": {},
                "size": {},
                "encoding": {},
                "describe": {},
                "toObjectResolved": {},
                "forEachParent": {},
                "toJSON": {},
                "meta": {},
                "parent": {}
              },
              "id": "aca1591f-f0dd-4c94-a973-66ad7bf1bdec",
              "assertions": [
                {
                  "assertion": "response has token: UAOGTALI44SPM237Y4TVFOKNMD"
                }
              ]
            },
            {
              "cursor": {
                "ref": "5141db05-d963-4ff9-a32b-24decf0eb540",
                "length": 2,
                "cycles": 1,
                "position": 1,
                "iteration": 0
              },
              "item": {
                "id": "1e9e54e2-0d59-4883-ae04-258bd98cfbeb",
                "name": "Increase Auth Token Timeout",
                "request": {
                  "url": "https://{{iWorkflow_Mgmt_IP}}/mgmt/shared/authz/tokens/{{iWorkflow1_Auth_Token}}",
                  "method": "PATCH",
                  "header": [
                    {
                      "description": {
                        "content": "",
                        "type": "text/plain"
                      },
                      "key": "X-F5-Auth-Token",
                      "value": "{{iWorkflow1_Auth_Token}}"
                    },
                    {
                      "description": {
                        "content": "",
                        "type": "text/plain"
                      },
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "body": {
                    "mode": "raw",
                    "raw": "{\n    \"timeout\":\"36000\"\n}"
                  },
                  "description": {
                    "content": "",
                    "type": "text/plain"
                  }
                },
                "response": [],
                "event": [
                  {
                    "listen": "test",
                    "script": {
                      "type": "text/javascript",
                      "exec": [
                        "tests[\"Status code is 200\"] = responseCode.code === 200;",
                        "",
                        "var respData = JSON.parse(responseBody);",
                        "tests[\"Auth Token timeout is: \" +respData.timeout] = respData.timeout;",
                        ""
                      ]
                    }
                  }
                ]
              },
              "request": {
                "url": "https://192.168.143.25/mgmt/shared/authz/tokens/UAOGTALI44SPM237Y4TVFOKNMD",
                "method": "PATCH",
                "header": [
                  {
                    "description": {
                      "content": "",
                      "type": "text/plain"
                    },
                    "key": "X-F5-Auth-Token",
                    "value": "UAOGTALI44SPM237Y4TVFOKNMD"
                  },
                  {
                    "description": {
                      "content": "",
                      "type": "text/plain"
                    },
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "User-Agent",
                    "value": "PostmanRuntime/5.0.0"
                  },
                  {
                    "key": "Accept",
                    "value": "*/*"
                  },
                  {
                    "key": "Host",
                    "value": "192.168.143.25"
                  },
                  {
                    "key": "accept-encoding",
                    "value": "gzip, deflate"
                  },
                  {
                    "key": "content-length",
                    "value": 25
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"timeout\":\"36000\"\n}"
                },
                "description": {
                  "content": "",
                  "type": "text/plain"
                }
              },
              "response": {
                "id": "0fd20b89-6b5d-4d5f-bb4b-8baa42ae2bd1",
                "status": "OK",
                "code": 200,
                "header": [
                  {
                    "key": "Date",
                    "value": "30 Mar 2017 15:40:28 UTC"
                  },
                  {
                    "key": "Server",
                    "value": "com.f5.rest.common.RestRequestSender"
                  },
                  {
                    "key": "X-Frame-Options",
                    "value": "SAMEORIGIN"
                  },
                  {
                    "key": "Strict-Transport-Security",
                    "value": "max-age=16070400; includeSubDomains"
                  },
                  {
                    "key": "Pragma",
                    "value": "no-cache"
                  },
                  {
                    "key": "Cache-Control",
                    "value": "no-store, no-cache, must-revalidate"
                  },
                  {
                    "key": "Expires",
                    "value": "-1"
                  },
                  {
                    "key": "Content-Length",
                    "value": "530"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Local-Ip-From-Httpd",
                    "value": "192.168.143.25"
                  },
                  {
                    "key": "X-Forwarded-Server",
                    "value": "localhost.localdomain"
                  },
                  {
                    "key": "X-Forwarded-Proto",
                    "value": "http"
                  },
                  {
                    "key": "accept-encoding",
                    "value": "gzip, deflate"
                  },
                  {
                    "key": "X-Forwarded-Host",
                    "value": "192.168.143.25"
                  },
                  {
                    "key": "X-Content-Type-Options",
                    "value": "nosniff"
                  },
                  {
                    "key": "X-XSS-Protection",
                    "value": "1; mode=block"
                  },
                  {
                    "key": "Content-Security-Policy",
                    "value": "default-src 'self'  'unsafe-inline' 'unsafe-eval'; img-src 'self'  http://127.4.1.1 http://127.4.2.1"
                  },
                  {
                    "key": "Keep-Alive",
                    "value": "timeout=4, max=99"
                  },
                  {
                    "key": "Connection",
                    "value": "Keep-Alive"
                  }
                ],
                "body": "{\"token\":\"UAOGTALI44SPM237Y4TVFOKNMD\",\"name\":\"UAOGTALI44SPM237Y4TVFOKNMD\",\"userName\":\"admin\",\"authProviderName\":\"local\",\"user\":{\"link\":\"https://localhost/mgmt/shared/authz/users/admin\"},\"groupReferences\":[],\"timeout\":36000,\"startTime\":\"2017-03-30T17:40:28.294+0200\",\"address\":\"192.168.143.1\",\"partition\":\"[All]\",\"generation\":2,\"lastUpdateMicros\":1490888428395703,\"expirationMicros\":1490924428294000,\"kind\":\"shared:authz:tokens:authtokenitemstate\",\"selfLink\":\"https://localhost/mgmt/shared/authz/tokens/UAOGTALI44SPM237Y4TVFOKNMD\"}",
                "cookie": [],
                "responseTime": 14,
                "responseSize": 530,
                "update": {},
                "_postman_requiresId": true,
                "reason": {},
                "text": {},
                "json": {},
                "mime": {},
                "dataURI": {},
                "size": {},
                "encoding": {},
                "describe": {},
                "toObjectResolved": {},
                "forEachParent": {},
                "toJSON": {},
                "meta": {},
                "parent": {}
              },
              "id": "1e9e54e2-0d59-4883-ae04-258bd98cfbeb",
              "assertions": [
                {
                  "assertion": "Status code is 200"
                },
                {
                  "assertion": "Auth Token timeout is: 36000"
                }
              ]
            }
          ],
          "transfers": {
            "responseTotal": 1241
          },
          "failures": [],
          "error": null
        }
      }
    },
    {
      "name": "Create the subscription for our REST Worker",
      "skip": false,
      "options": {
        "collection": "iWF-Subscription-Collection.postman_collection",
        "environment": {
          "values": [
            {
              "key": "iWorkflow_Mgmt_IP",
              "value": "192.168.143.25",
              "type": "text",
              "enabled": true
            },
            {
              "key": "iwf_username",
              "value": "admin",
              "type": "text",
              "enabled": true
            },
            {
              "key": "iwf_password",
              "value": "admin",
              "type": "text",
              "enabled": true
            },
            {
              "type": "any",
              "value": "UAOGTALI44SPM237Y4TVFOKNMD",
              "key": "iWorkflow1_Auth_Token"
            }
          ]
        },
        "insecure": true,
        "reporters": [
          "cli"
        ],
        "globals": "./iWF-Subscription-Collection.postman_environment"
      },
      "children": [],
      "run": {
        "collection": {
          "info": {
            "id": "7a356500-87e2-8e04-5049-0b0703f61a72",
            "name": "iWF Subscription Collection",
            "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
          },
          "event": [],
          "variable": [],
          "item": [
            {
              "id": "09b2dc4c-844f-48b3-b499-564c640007be",
              "name": "create subscription",
              "request": {
                "url": "https://{{iWorkflow_Mgmt_IP}}/mgmt/subscriptions",
                "method": "POST",
                "header": [
                  {
                    "description": {
                      "content": "",
                      "type": "text/plain"
                    },
                    "key": "X-F5-Auth-Token",
                    "value": "{{iWorkflow1_Auth_Token}}"
                  },
                  {
                    "description": {
                      "content": "",
                      "type": "text/plain"
                    },
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\"topic\" : \"/mgmt/cm/cloud/tenants/Tenant_Nicolas/services/iapp/\",\r\"subscriber\": \"http://localhost:8105/shared/ipam-dns-placement-handler\"\r}"
                },
                "description": {
                  "content": "create a subscription to monitor the deployment of an iApp. if it happens, the subscription will trigger our handler",
                  "type": "text/plain"
                }
              },
              "response": [],
              "event": []
            },
            {
              "id": "ea874b3d-50d6-490c-b7ab-366d991363e4",
              "name": "Check subscription",
              "request": {
                "url": "https://{{iWorkflow_Mgmt_IP}}/mgmt/cm/cloud/tenants/Tenant_Nicolas/services/iapp/subscriptions",
                "method": "GET",
                "header": [
                  {
                    "description": {
                      "content": "",
                      "type": "text/plain"
                    },
                    "key": "X-F5-Auth-Token",
                    "value": "{{iWorkflow1_Auth_Token}}"
                  },
                  {
                    "description": {
                      "content": "",
                      "type": "text/plain"
                    },
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {},
                "description": {
                  "content": "",
                  "type": "text/plain"
                }
              },
              "response": [],
              "event": []
            }
          ]
        },
        "environment": {
          "id": "6ae03f2f-9a51-4caa-b84a-3f5a7dd8987e",
          "values": [
            {
              "type": "any",
              "value": "192.168.143.25",
              "key": "iWorkflow_Mgmt_IP"
            },
            {
              "type": "any",
              "value": "admin",
              "key": "iwf_username"
            },
            {
              "type": "any",
              "value": "admin",
              "key": "iwf_password"
            },
            {
              "type": "any",
              "value": "UAOGTALI44SPM237Y4TVFOKNMD",
              "key": "iWorkflow1_Auth_Token"
            }
          ]
        },
        "globals": {
          "_": {
            "postman_variable_scope": "environment",
            "postman_exported_at": "2017-03-30T14:50:52.557Z",
            "postman_exported_using": "Postman/4.10.5"
          },
          "id": "b18b50ad-93f5-f564-498f-249de91c6fed",
          "name": "iWF Subscription Collection",
          "values": [
            {
              "type": "any",
              "value": "192.168.143.30",
              "key": "iWorkflow_Mgmt_IP"
            },
            {
              "type": "any",
              "value": "admin",
              "key": "iwf_username"
            },
            {
              "type": "any",
              "value": "admin",
              "key": "iwf_password"
            }
          ]
        },
        "run": {
          "stats": {
            "iterations": {
              "total": 1,
              "pending": 0,
              "failed": 0
            },
            "items": {
              "total": 2,
              "pending": 0,
              "failed": 0
            },
            "scripts": {
              "total": 0,
              "pending": 0,
              "failed": 0
            },
            "prerequests": {
              "total": 2,
              "pending": 0,
              "failed": 0
            },
            "requests": {
              "total": 2,
              "pending": 0,
              "failed": 0
            },
            "tests": {
              "total": 2,
              "pending": 0,
              "failed": 0
            },
            "assertions": {
              "total": 0,
              "pending": 0,
              "failed": 0
            },
            "testScripts": {
              "total": 0,
              "pending": 0,
              "failed": 0
            },
            "prerequestScripts": {
              "total": 0,
              "pending": 0,
              "failed": 0
            }
          },
          "timings": {
            "responseAverage": 6.5,
            "started": 1490888428710,
            "completed": 1490888428766
          },
          "executions": [
            {
              "cursor": {
                "position": 0,
                "iteration": 0,
                "length": 2,
                "cycles": 1,
                "empty": false,
                "eof": false,
                "bof": true,
                "cr": false,
                "ref": "d41b498e-4f5d-4968-960c-265c75e0cbe8"
              },
              "item": {
                "id": "09b2dc4c-844f-48b3-b499-564c640007be",
                "name": "create subscription",
                "request": {
                  "url": "https://{{iWorkflow_Mgmt_IP}}/mgmt/subscriptions",
                  "method": "POST",
                  "header": [
                    {
                      "description": {
                        "content": "",
                        "type": "text/plain"
                      },
                      "key": "X-F5-Auth-Token",
                      "value": "{{iWorkflow1_Auth_Token}}"
                    },
                    {
                      "description": {
                        "content": "",
                        "type": "text/plain"
                      },
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "body": {
                    "mode": "raw",
                    "raw": "{\r\"topic\" : \"/mgmt/cm/cloud/tenants/Tenant_Nicolas/services/iapp/\",\r\"subscriber\": \"http://localhost:8105/shared/ipam-dns-placement-handler\"\r}"
                  },
                  "description": {
                    "content": "create a subscription to monitor the deployment of an iApp. if it happens, the subscription will trigger our handler",
                    "type": "text/plain"
                  }
                },
                "response": [],
                "event": []
              },
              "request": {
                "url": "https://192.168.143.25/mgmt/subscriptions",
                "method": "POST",
                "header": [
                  {
                    "description": {
                      "content": "",
                      "type": "text/plain"
                    },
                    "key": "X-F5-Auth-Token",
                    "value": "UAOGTALI44SPM237Y4TVFOKNMD"
                  },
                  {
                    "description": {
                      "content": "",
                      "type": "text/plain"
                    },
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "User-Agent",
                    "value": "PostmanRuntime/5.0.0"
                  },
                  {
                    "key": "Accept",
                    "value": "*/*"
                  },
                  {
                    "key": "Host",
                    "value": "192.168.143.25"
                  },
                  {
                    "key": "accept-encoding",
                    "value": "gzip, deflate"
                  },
                  {
                    "key": "content-length",
                    "value": 141
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\"topic\" : \"/mgmt/cm/cloud/tenants/Tenant_Nicolas/services/iapp/\",\r\"subscriber\": \"http://localhost:8105/shared/ipam-dns-placement-handler\"\r}"
                },
                "description": {
                  "content": "create a subscription to monitor the deployment of an iApp. if it happens, the subscription will trigger our handler",
                  "type": "text/plain"
                }
              },
              "response": {
                "id": "f8a20829-1242-4b1f-ad23-60bd10d49771",
                "status": "OK",
                "code": 200,
                "header": [
                  {
                    "key": "Date",
                    "value": "30 Mar 2017 15:40:28 UTC"
                  },
                  {
                    "key": "Server",
                    "value": "com.f5.rest.common.RestRequestSender"
                  },
                  {
                    "key": "X-Frame-Options",
                    "value": "SAMEORIGIN"
                  },
                  {
                    "key": "Strict-Transport-Security",
                    "value": "max-age=16070400; includeSubDomains"
                  },
                  {
                    "key": "Pragma",
                    "value": "no-cache"
                  },
                  {
                    "key": "Cache-Control",
                    "value": "no-store, no-cache, must-revalidate"
                  },
                  {
                    "key": "Expires",
                    "value": "-1"
                  },
                  {
                    "key": "Content-Length",
                    "value": "376"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Local-Ip-From-Httpd",
                    "value": "192.168.143.25"
                  },
                  {
                    "key": "X-Forwarded-Server",
                    "value": "localhost.localdomain"
                  },
                  {
                    "key": "X-Forwarded-Proto",
                    "value": "http"
                  },
                  {
                    "key": "accept-encoding",
                    "value": "gzip, deflate"
                  },
                  {
                    "key": "X-Forwarded-Host",
                    "value": "192.168.143.25"
                  },
                  {
                    "key": "X-Content-Type-Options",
                    "value": "nosniff"
                  },
                  {
                    "key": "X-XSS-Protection",
                    "value": "1; mode=block"
                  },
                  {
                    "key": "Content-Security-Policy",
                    "value": "default-src 'self'  'unsafe-inline' 'unsafe-eval'; img-src 'self'  http://127.4.1.1 http://127.4.2.1"
                  },
                  {
                    "key": "Keep-Alive",
                    "value": "timeout=4, max=98"
                  },
                  {
                    "key": "Connection",
                    "value": "Keep-Alive"
                  }
                ],
                "body": "{\"token\":\"UIYIOAERLFIO2NGOKS3D3FYTZD\",\"topic\":\"/mgmt/cm/cloud/tenants/Tenant_Nicolas/services/iapp/\",\"subscriber\":\"http://localhost:8105/shared/ipam-dns-placement-handler\",\"isPersisted\":false,\"matchDepth\":-1,\"generation\":1,\"lastUpdateMicros\":1490888428726779,\"kind\":\"subscriptions:restsubscription\",\"selfLink\":\"https://localhost/mgmt/subscriptions/UIYIOAERLFIO2NGOKS3D3FYTZD\"}",
                "cookie": [],
                "responseTime": 6,
                "responseSize": 376,
                "update": {},
                "_postman_requiresId": true,
                "reason": {},
                "text": {},
                "json": {},
                "mime": {},
                "dataURI": {},
                "size": {},
                "encoding": {},
                "describe": {},
                "toObjectResolved": {},
                "forEachParent": {},
                "toJSON": {},
                "meta": {},
                "parent": {}
              },
              "id": "09b2dc4c-844f-48b3-b499-564c640007be"
            },
            {
              "cursor": {
                "ref": "c78d5f64-a6b1-4412-a176-7f2135c05f55",
                "length": 2,
                "cycles": 1,
                "position": 1,
                "iteration": 0
              },
              "item": {
                "id": "ea874b3d-50d6-490c-b7ab-366d991363e4",
                "name": "Check subscription",
                "request": {
                  "url": "https://{{iWorkflow_Mgmt_IP}}/mgmt/cm/cloud/tenants/Tenant_Nicolas/services/iapp/subscriptions",
                  "method": "GET",
                  "header": [
                    {
                      "description": {
                        "content": "",
                        "type": "text/plain"
                      },
                      "key": "X-F5-Auth-Token",
                      "value": "{{iWorkflow1_Auth_Token}}"
                    },
                    {
                      "description": {
                        "content": "",
                        "type": "text/plain"
                      },
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "body": {},
                  "description": {
                    "content": "",
                    "type": "text/plain"
                  }
                },
                "response": [],
                "event": []
              },
              "request": {
                "url": "https://192.168.143.25/mgmt/cm/cloud/tenants/Tenant_Nicolas/services/iapp/subscriptions",
                "method": "GET",
                "header": [
                  {
                    "description": {
                      "content": "",
                      "type": "text/plain"
                    },
                    "key": "X-F5-Auth-Token",
                    "value": "UAOGTALI44SPM237Y4TVFOKNMD"
                  },
                  {
                    "description": {
                      "content": "",
                      "type": "text/plain"
                    },
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "User-Agent",
                    "value": "PostmanRuntime/5.0.0"
                  },
                  {
                    "key": "Accept",
                    "value": "*/*"
                  },
                  {
                    "key": "Host",
                    "value": "192.168.143.25"
                  },
                  {
                    "key": "accept-encoding",
                    "value": "gzip, deflate"
                  }
                ],
                "body": {},
                "description": {
                  "content": "",
                  "type": "text/plain"
                }
              },
              "response": {
                "id": "b356edd9-5b02-4780-b9f9-529f1cd27d69",
                "status": "Not Found",
                "code": 404,
                "header": [
                  {
                    "key": "Date",
                    "value": "30 Mar 2017 15:40:28 UTC"
                  },
                  {
                    "key": "Server",
                    "value": "com.f5.rest.common.RestRequestSender"
                  },
                  {
                    "key": "X-Frame-Options",
                    "value": "SAMEORIGIN"
                  },
                  {
                    "key": "Strict-Transport-Security",
                    "value": "max-age=16070400; includeSubDomains"
                  },
                  {
                    "key": "Pragma",
                    "value": "no-cache"
                  },
                  {
                    "key": "Cache-Control",
                    "value": "no-store, no-cache, must-revalidate"
                  },
                  {
                    "key": "Expires",
                    "value": "-1"
                  },
                  {
                    "key": "Content-Length",
                    "value": "2508"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Local-Ip-From-Httpd",
                    "value": "192.168.143.25"
                  },
                  {
                    "key": "X-Forwarded-Server",
                    "value": "localhost.localdomain"
                  },
                  {
                    "key": "X-Forwarded-Proto",
                    "value": "http"
                  },
                  {
                    "key": "accept-encoding",
                    "value": "gzip, deflate"
                  },
                  {
                    "key": "X-Forwarded-Host",
                    "value": "192.168.143.25"
                  },
                  {
                    "key": "X-Content-Type-Options",
                    "value": "nosniff"
                  },
                  {
                    "key": "X-XSS-Protection",
                    "value": "1; mode=block"
                  },
                  {
                    "key": "Content-Security-Policy",
                    "value": "default-src 'self'  'unsafe-inline' 'unsafe-eval'; img-src 'self'  http://127.4.1.1 http://127.4.2.1"
                  },
                  {
                    "key": "Keep-Alive",
                    "value": "timeout=4, max=97"
                  },
                  {
                    "key": "Connection",
                    "value": "Keep-Alive"
                  }
                ],
                "body": "{\"code\":404,\"message\":\"Public URI path not registered. Please see /var/log/restjavad.0.log and /var/log/restnoded/restnoded.log for details.\",\"referer\":\"192.168.143.1\",\"restOperationId\":32123,\"errorStack\":[\"com.f5.rest.common.RestWorkerUriNotFoundException: Public URI path not registered. Please see /var/log/restjavad.0.log and /var/log/restnoded/restnoded.log for details.\",\"at com.f5.rest.workers.ForwarderPassThroughWorker.cloneAndForwardRequest(ForwarderPassThroughWorker.java:467)\",\"at com.f5.rest.workers.ForwarderPassThroughWorker.access$000(ForwarderPassThroughWorker.java:38)\",\"at com.f5.rest.workers.ForwarderPassThroughWorker$1.completed(ForwarderPassThroughWorker.java:292)\",\"at com.f5.rest.workers.ForwarderPassThroughWorker$1.completed(ForwarderPassThroughWorker.java:289)\",\"at com.f5.rest.workers.EvaluatePermissions.completeEvaluatePermission(EvaluatePermissions.java:147)\",\"at com.f5.rest.workers.EvaluatePermissions.access$000(EvaluatePermissions.java:23)\",\"at com.f5.rest.workers.EvaluatePermissions$1.completed(EvaluatePermissions.java:87)\",\"at com.f5.rest.workers.EvaluatePermissions$1.completed(EvaluatePermissions.java:83)\",\"at com.f5.rest.common.RestOperation.complete(RestOperation.java:2431)\",\"at com.f5.rest.common.RestWorker$3.completed(RestWorker.java:730)\",\"at com.f5.rest.common.RestWorker$3.completed(RestWorker.java:719)\",\"at com.f5.rest.common.RestOperation.complete(RestOperation.java:2431)\",\"at com.f5.rest.workers.AuthTokenWorker.onGet(AuthTokenWorker.java:269)\",\"at com.f5.rest.common.RestCollectionWorker.callDerivedRestMethod(RestCollectionWorker.java:804)\",\"at com.f5.rest.common.RestWorker.callRestMethodHandler(RestWorker.java:1114)\",\"at com.f5.rest.common.RestServer.processQueuedRequests(RestServer.java:1355)\",\"at com.f5.rest.common.RestServer.access$000(RestServer.java:46)\",\"at com.f5.rest.common.RestServer$1.run(RestServer.java:312)\",\"at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\",\"at java.util.concurrent.FutureTask.run(FutureTask.java:262)\",\"at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)\",\"at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)\",\"at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\",\"at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\",\"at java.lang.Thread.run(Thread.java:745)\\n\"],\"kind\":\":resterrorresponse\"}",
                "cookie": [],
                "responseTime": 7,
                "responseSize": 2508,
                "update": {},
                "_postman_requiresId": true,
                "reason": {},
                "text": {},
                "json": {},
                "mime": {},
                "dataURI": {},
                "size": {},
                "encoding": {},
                "describe": {},
                "toObjectResolved": {},
                "forEachParent": {},
                "toJSON": {},
                "meta": {},
                "parent": {}
              },
              "id": "ea874b3d-50d6-490c-b7ab-366d991363e4"
            }
          ],
          "transfers": {
            "responseTotal": 2884
          },
          "failures": [],
          "error": null
        }
      }
    }
  ],
  "runId": "Wrapper_iwf_subscription-2017-03-30-15-40-27"
}
